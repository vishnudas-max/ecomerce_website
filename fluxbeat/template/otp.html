{% extends 'nav.html' %}
{% block contend %}
{% load static %}
<!-- Material Design Iconic Font-V2.2.0 -->
<link rel="stylesheet" href="{% static 'css/material-design-iconic-font.min.css' %}">
<!-- Font Awesome -->
<link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
<!-- Font Awesome Stars-->
<link rel="stylesheet" href="{% static 'css/fontawesome-stars.css' %}">
<!-- Meanmenu CSS -->
<link rel="stylesheet" href="{% static 'css/meanmenu.css' %}">
<!-- owl carousel CSS -->
<link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
<!-- Slick Carousel CSS -->
<link rel="stylesheet" href="{% static 'css/slick.css' %}">
<!-- Animate CSS -->
<link rel="stylesheet" href="{% static 'css/animate.css' %}">
<!-- Jquery-ui CSS -->
<link rel="stylesheet" href="{% static 'css/jquery-ui.min.css' %}">
<!-- Venobox CSS -->
<link rel="stylesheet" href="{% static 'css/venobox.css' %}">
<!-- Nice Select CSS -->
<link rel="stylesheet" href="{% static 'css/nice-select.css' %}">
<!-- Magnific Popup CSS -->
<link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
<!-- Bootstrap V4.1.3 Fremwork CSS -->
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
<!-- Helper CSS -->
<link rel="stylesheet" href="{% static 'css/helper.css' %}">
<!-- Main Style CSS -->
<link rel="stylesheet" href="{% static 'style.css' %}">
<!-- Responsive CSS -->
<link rel="stylesheet" href="{% static 'css/responsive.css' %}">
<!-- Modernizr js -->
<script src="{% static 'js/vendor/modernizr-2.8.3.min.js' %}"></script>
 <!-- Begin Li's Breadcrumb Area -->

<!-- Li's Breadcrumb Area End Here -->
<!-- Begin Login Content Area -->
   <!-- jersey man user login-->
<div class="page-section mb-60">
    <div class="container">
        <div class="row d-flex justify-content-center">
            <div class="col-sm-12 col-md-12 col-xs-12 col-lg-6 mb-30 ">
                <!-- Login Form s-->
                <form action="otp_varify" method="POST">
                    {% csrf_token %}
                    <div class="login-form ">
                        <h4 class="login-title">Varify OTP</h4>
                        <div class="row">
                            <div class="col-md-12 col-12 mb-20">
                                <label>OTP</label>
                                <input class="mb-0" type="text" placeholder="Enter the OTP" name="otp">
                           </div>

                           <div class="col-md-8" id="resendContainer">
                            <div class="check-box d-inline-block ml-0 ml-md-2 mt-10">
                                <a {% if k == 1 %} href="{% url 'otp' %}" {% endif %} class="btn li-button-dark" >Resend</a>
                                
                                <label for="remember_me">Resend OTP</label>
                            </div>
                        </div>
                            <div class="col-md-4 mt-10 mb-20 text-dark font-weight-bold text-left text-md-right">
                                <p id="timer"></p>
                               
                            </div>
                            <div class="col-md-12">
                                {% for message in messages %}
                                <p class="text-danger">{{message}}</p>
                                {% endfor %}
                            </div>
                            <div class="col-md-12">
                                <button class="register-button mt-0" type="submit">Varify OTP</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
let timerElement = document.getElementById('timer');
let timeInSeconds;

// Retrieve the timer value from sessionStorage
if (sessionStorage.getItem('timerValue')) {
    timeInSeconds = parseInt(sessionStorage.getItem('timerValue'));
} else {
    timeInSeconds = 60;
}

function updateTimer() {
    const minutes = Math.floor(timeInSeconds / 60);
    const seconds = timeInSeconds % 60;
    const formattedTime = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    timerElement.textContent = formattedTime;

    timeInSeconds--;

    // Save the updated timer value to sessionStorage
    sessionStorage.setItem('timerValue', timeInSeconds);

    if (timeInSeconds < 0) {
        clearInterval(timerInterval);
        // Clear the sessionStorage when the timer reaches 0
        sessionStorage.removeItem('timerValue');
    }
}

// Call updateTimer immediately to display the initial time
updateTimer();

// Set up an interval to update the timer every second
const timerInterval = setInterval(updateTimer, 1000);

</script>

{% endblock contend %}